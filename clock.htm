<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>スイス風時計＋天気（+10分）</title>

<style>
body {
  margin: 0;
  font-family: "Segoe UI","Hiragino Sans","Meiryo",sans-serif;
  display: flex;
  height: 100vh;
  background: #000;
  color: #fff;
}

/* ===== レイアウト ===== */
#left {
  width: 40%;
  padding: 20px;
  box-sizing: border-box;
}

#right {
  width: 60%;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* ===== カレンダー ===== */
#calendar-container {
  height: 60%;
  background: #000;
  color: #fff;
  border-radius: 12px;
  padding: 15px;
  box-shadow: inset 0 0 15px rgba(255,255,255,0.1);
  overflow: auto;
}

table {
  width: 100%;
  border-collapse: collapse;
  text-align: center;
}

th {
  background: #111;
  padding: 6px;
  font-weight: normal;
}

td {
  padding: 8px;
  border: 1px solid #333;
}

td.today {
  background: #444;
  font-weight: bold;
}

/* ===== アナログ時計 ===== */
.clock {
  width: 380px;
  height: 380px;
  border-radius: 50%;
  background: radial-gradient(circle, #111 60%, #000 100%);
  border: 8px solid #222;
  position: relative;
  box-shadow:
    inset 0 0 20px rgba(255,255,255,0.1),
    0 0 30px rgba(0,0,0,0.8);
    transform: scale(0.5);
  transform-origin: top right;
}

/* インデックス */
.clock span {
  position: absolute;
  width: 100%;
  height: 100%;
  transform: rotate(calc(30deg * var(--i)));
}

.clock span::before {
  content: "";
  position: absolute;
  top: 12px;
  left: 50%;
  width: 4px;
  height: 20px;
  background: #ddd;
  transform: translateX(-50%);
}

/* 針 */
.hand {
  position: absolute;
  bottom: 50%;
  left: 50%;
  transform-origin: bottom;
  transform: translateX(-50%);
}

.hour {
  width: 6px;
  height: 90px;
  background: #fff;
  border-radius: 3px;
}

.minute {
  width: 4px;
  height: 130px;
  background: #ccc;
  border-radius: 3px;
}

.second {
  width: 2px;
  height: 120px; /* 80% */
  background: #d32f2f;
}

/* 秒針先端の赤丸（3倍） */
.second::after {
  content: "";
  position: absolute;
  top: -18px;
  left: 50%;
  width: 30px;
  height: 30px;
  background: #d32f2f;
  border-radius: 50%;
  transform: translateX(-50%);
}

/* 中央キャップ */
.center {
  position: absolute;
  width: 14px;
  height: 14px;
  background: #fff;
  border-radius: 50%;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

/* ===== デジタル表示（左下 / +10分） ===== */
#digital {
  position: fixed;
  left: 20px;
  bottom: 20px;
  font-family: monospace;
  opacity: 0.9;
}

#digital-time {
  font-size: 22em;
  font-weight: bold;
  letter-spacing: 2px;
}

#digital-date {
  font-size: 3em;
  color: #ccc;
}

/* ===== 天気表示（右下） ===== */
#weather {
  position: fixed;
  right: 20px;
  bottom: 20px;
  display: flex;
  align-items: center;
  gap: 10px;
  background: rgba(0,0,0,0.6);
  padding: 10px 14px;
  border-radius: 10px;
  box-shadow: inset 0 0 10px rgba(255,255,255,0.1);
}

#weather img {
  width: 96px;
  height: 96px;
}

#weather-temp {
  font-size: 3em;
  font-weight: bold;
}

#weather-desc {
  font-size: 1em;
  color: #ccc;
}
</style>
</head>

<body>

<div id="left">
  <div id="calendar-container"></div>
</div>

<div id="right">
  <div class="clock">
    <div class="hand hour" id="hour"></div>
    <div class="hand minute" id="minute"></div>
    <div class="hand second" id="second"></div>
    <div class="center"></div>

    <span style="--i:1"></span><span style="--i:2"></span><span style="--i:3"></span>
    <span style="--i:4"></span><span style="--i:5"></span><span style="--i:6"></span>
    <span style="--i:7"></span><span style="--i:8"></span><span style="--i:9"></span>
    <span style="--i:10"></span><span style="--i:11"></span><span style="--i:12"></span>
  </div>
</div>

<!-- デジタル -->
<div id="digital">
  <div id="digital-time"></div>
  <div id="digital-date"></div>
</div>

<!-- 天気 -->
<div id="weather">
  <img id="weather-icon" alt="weather">
  <div>
    <div id="weather-temp"></div>
    <div id="weather-desc"></div>
  </div>
</div>

<script>
/* ===== アナログ時計（+10分） ===== */
function updateAnalogClock() {
  const now = new Date();
  const plus10 = new Date(now.getTime() + 10 * 60 * 1000);

  const sec = plus10.getSeconds();
  const min = plus10.getMinutes();
  const hour = plus10.getHours();

  document.getElementById("second").style.transform =
    `translateX(-50%) rotate(${sec * 6}deg)`;
  document.getElementById("minute").style.transform =
    `translateX(-50%) rotate(${min * 6 + sec * 0.1}deg)`;
  document.getElementById("hour").style.transform =
    `translateX(-50%) rotate(${hour * 30 + min * 0.5}deg)`;
}

/* ===== デジタル時計（+10分） ===== */
function updateDigitalClock() {
  const now = new Date();
  const plus10 = new Date(now.getTime() + 10 * 60 * 1000);

  document.getElementById("digital-time").textContent =
    plus10.toLocaleTimeString('ja-JP', {
      hour12: false,
      hour: '2-digit',
      minute: '2-digit',
      /*second: '2-digit'*/
    });

  document.getElementById("digital-date").textContent =
    plus10.toLocaleDateString('zh-CN', {
      year: '2-digit',
      month: '2-digit',
      day: '2-digit',
      weekday: 'short'
    });
}

setInterval(() => {
  updateAnalogClock();
  updateDigitalClock();
}, 1000);

updateAnalogClock();
updateDigitalClock();

/* ===== カレンダー ===== */
function generateCalendar(year, month) {
  const container = document.getElementById("calendar-container");
  container.innerHTML = "";

  const title = document.createElement("h2");
  title.textContent = `${String(year).slice(-2)}年 ${month}月`;
  container.appendChild(title);

  const table = document.createElement("table");
  const days = ['天','一','二','三','四','五','六'];
  let row = document.createElement("tr");

  days.forEach(d => {
    const th = document.createElement("th");
    th.textContent = d;
    row.appendChild(th);
  });
  table.appendChild(row);

  const firstDay = new Date(year, month - 1, 1).getDay();
  const lastDate = new Date(year, month, 0).getDate();
  row = document.createElement("tr");

  for (let i = 0; i < firstDay; i++) row.appendChild(document.createElement("td"));

  for (let day = 1; day <= lastDate; day++) {
    const td = document.createElement("td");
    td.textContent = day;

    const today = new Date();
    if (day === today.getDate() &&
        month === today.getMonth() + 1 &&
        year === today.getFullYear()) {
      td.classList.add("today");
    }

    row.appendChild(td);
    if ((firstDay + day) % 7 === 0) {
      table.appendChild(row);
      row = document.createElement("tr");
    }
  }
  table.appendChild(row);
  container.appendChild(table);
}

const now = new Date();
generateCalendar(now.getFullYear(), now.getMonth() + 1);

/* ===== 東京の天気 ===== */
async function loadTokyoWeather() {
  const API_KEY = "579376d4a1533024ba302c945c6555d6";
  const url =
    `https://api.openweathermap.org/data/2.5/weather` +
    `?q=Tokyo,jp&units=metric&lang=ja&appid=${API_KEY}`;

  try {
    const res = await fetch(url);
    const data = await res.json();

    document.getElementById("weather-temp").textContent =
      `${Math.round(data.main.temp)}℃`;
    document.getElementById("weather-desc").textContent =
      data.weather[0].description;
    document.getElementById("weather-icon").src =
      `https://openweathermap.org/img/wn/${data.weather[0].icon}@2x.png`;

  } catch {
    document.getElementById("weather-temp").textContent = "取得失敗";
  }
}

loadTokyoWeather();
setInterval(loadTokyoWeather, 10 * 60 * 1000);
</script>

</body>
</html>
